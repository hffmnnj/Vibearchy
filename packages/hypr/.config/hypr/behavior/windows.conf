# ═══════════════════════════════════════════════════════════════════════════════
# Vibearchy Window Rules
# Float, size, position, opacity, and workspace assignments
# ═══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# Float Rules - Size Categories
# ─────────────────────────────────────────────────────────────────────────────

# Large centered floats (media players, image viewers)
$center-float-large = class:^(center-float-large)$|^(.*qimgv.*)$|^(.*mpv.*)$
windowrule = float, $center-float-large
windowrule = size 70% 70%, $center-float-large
windowrule = center 1, $center-float-large

# Standard centered floats (file dialogs)
$center-float = class:^(center-float)$
$center-float-title = title:^(.*Open Folder.*)$|^(.*Open File.*)$|^(.*Save File.*)$|^(.*Save Folder.*)$|^(.*Save Image.*)$|^(.*Save As.*)$|^(.*Open As.*)$
windowrule = float, $center-float
windowrule = float, $center-float-title
windowrule = size 50% 50%, $center-float
windowrule = size 50% 50%, $center-float-title
windowrule = center 1, $center-float
windowrule = center 1, $center-float-title

# Mini centered floats (calculators, small utilities)
$center-float-mini = class:^(center-float-mini)$|^(.*galculator.*)$|^(.*ytdlp-gui.*)$|^(.*udiskie.*)$|^(.*Calculator.*)$
windowrule = float, $center-float-mini
windowrule = size 30% 40%, $center-float-mini
windowrule = center 1, $center-float-mini

# System utilities
windowrulev2 = float, class:^(xfce-polkit|wleave|nwg-look|nm-connection-editor|org.twosheds.iwgtk|overskride)$
windowrulev2 = float, title:^(branchdialog)$

# ─────────────────────────────────────────────────────────────────────────────
# Smart Gaps (Single Window)
# ─────────────────────────────────────────────────────────────────────────────
# Remove gaps/borders when only one window on workspace
workspace = w[t1], gapsout:0, gapsin:0
workspace = w[tg1], gapsout:0, gapsin:0
workspace = f[1], gapsout:0, gapsin:0
windowrulev2 = bordersize 0, floating:0, onworkspace:w[t1]
windowrulev2 = rounding 0, floating:0, onworkspace:w[t1]
windowrulev2 = bordersize 0, floating:0, onworkspace:w[tg1]
windowrulev2 = rounding 0, floating:0, onworkspace:w[tg1]
windowrulev2 = bordersize 0, floating:0, onworkspace:f[1]
windowrulev2 = rounding 0, floating:0, onworkspace:f[1]

# ─────────────────────────────────────────────────────────────────────────────
# Browser Rules
# ─────────────────────────────────────────────────────────────────────────────

# Zen Browser
windowrulev2 = tile, class:^(zen)$, title:^(?!.*[Pp]op-?up)(?!.*[Dd]ialog)(?!.*[Pp]icture-in-[Pp]icture).*$
windowrulev2 = float, class:^(zen)$, title:.*([Pp]op-?up|[Dd]ialog|[Pp]icture-in-[Pp]icture).*
windowrulev2 = float, class:^(zen)$, title:^(Opening).*
windowrulev2 = float, class:^(zen)$, title:^(File Upload).*
windowrulev2 = float, class:^(zen)$, title:^(Save As).*
windowrulev2 = float, class:^(zen)$, title:^(Open File).*
windowrulev2 = center, class:^(zen)$, floating:1
windowrulev2 = size 800 600, class:^(zen)$, title:.*([Pp]op-?up|[Dd]ialog).*
windowrulev2 = minsize 400 300, class:^(zen)$, floating:1
windowrulev2 = float, class:^(zen)$, title:^(Picture-in-Picture)$
windowrulev2 = pin, class:^(zen)$, title:^(Picture-in-Picture)$
windowrulev2 = size 640 360, class:^(zen)$, title:^(Picture-in-Picture)$
windowrulev2 = float, class:^(zen)$, title:.*Firefox.*
windowrulev2 = center, class:^(zen)$, title:.*Firefox.*
windowrulev2 = float, class:^(zen)$, title:^(Firefox — Sharing Indicator)$
windowrulev2 = move 0 0, class:^(zen)$, title:^(Firefox — Sharing Indicator)$
windowrulev2 = stayfocused, class:^(zen)$, title:.*[Pp]op-?up.*
windowrulev2 = noborder, class:^(zen)$, title:^(Firefox — Sharing Indicator)$

# Firefox/LibreWolf
windowrulev2 = float, class:^(.*LibreWolf.*)$, title:^(Library)$
windowrulev2 = float, class:^(.*zen-alpha.*)$, title:^(Library)$
windowrulev2 = float, class:^(firefox)$, title:^(Library)$
windowrulev2 = float, title:^(Picture-in-Picture)$
windowrulev2 = pin, title:^(Picture-in-Picture)$
windowrulev2 = size 25% 25%, title:^(Picture-in-Picture)$
windowrulev2 = move 74% 74%, title:^(Picture-in-Picture)$
windowrulev2 = float, title:^(Firefox — Sharing Indicator)$
windowrulev2 = move 0 0, title:^(Firefox — Sharing Indicator)$

# Chromium
windowrulev2 = opaque, class:^(chromium|Chromium)$
windowrulev2 = noblur, class:^(chromium|Chromium)$

# ─────────────────────────────────────────────────────────────────────────────
# Application-Specific Rules
# ─────────────────────────────────────────────────────────────────────────────

# Discord
windowrulev2 = float, class:^(discord)$, title:^(Discord Updater)$
windowrulev2 = float, class:^(Signal)$, title:^(Signal)$

# File Managers
windowrulev2 = float, class:^(thunar)$, title:^(File Operation Progress)$
windowrulev2 = float, class:^(thunar)$, title:^(Confirm to replace files)$
windowrulev2 = float, class:^(nemo)$, title:^(.*Properties)$
windowrulev2 = size 40% 50%, class:^(thunar|nemo)$, title:^(.*Properties)$

# General dialogs
windowrulev2 = float, title:^(Open File)$
windowrulev2 = float, title:^(Save File)$
windowrulev2 = float, title:^(Save As)$
windowrulev2 = float, title:^(Open Folder)$
windowrulev2 = center, floating:1, title:^(Open File|Save File|Save As|Open Folder)$

# XWayland Video Bridge
$videobridge = class:^(.*xwaylandvideobridge.*)$
windowrule = opacity 0.0 override 0.0 override, $videobridge
windowrule = noanim, $videobridge
windowrule = noblur, $videobridge
windowrule = noinitialfocus, $videobridge
windowrule = maxsize 1 1, $videobridge

# Zathura (PDF)
$zathura = class:^(.*zathura.*)$
windowrule = float, $zathura
windowrule = size 35% 90%, $zathura
windowrule = center 1, $zathura

# Scrcpy (Android)
$scrcpy = class:^(.*scrcpy.*)$
windowrule = center 1, $scrcpy
windowrule = float, $scrcpy

# Puppeteer/Automation
windowrulev2 = float, class:^(chromium|google-chrome|Chromium)$, title:^(about:blank|Puppeteer)
windowrulev2 = size 1920 1080, class:^(chromium|google-chrome|Chromium)$, title:^(about:blank|Puppeteer)
windowrulev2 = center, class:^(chromium|google-chrome|Chromium)$, title:^(about:blank|Puppeteer)
windowrulev2 = noinitialfocus, class:^(chromium|google-chrome|Chromium)$, title:^(about:blank|Puppeteer)

# ─────────────────────────────────────────────────────────────────────────────
# Transparency Rules
# ─────────────────────────────────────────────────────────────────────────────

# Development - Full opacity
windowrulev2 = opacity 1.0 override 1.0 override, class:^(Code|VSCodium|neovide|neovim)$
windowrulev2 = opacity 1.0 override 1.0 override, class:^(jetbrains-.*)$
windowrulev2 = opacity 1.0 override 1.0 override, workspace:2

# Terminals - Slight transparency
windowrulev2 = opacity 0.90 override 0.85 override, class:^(ghostty)$, floating:0
windowrulev2 = opacity 0.95 override 0.90 override, class:^(kitty|Alacritty)$, floating:0

# Floating windows
windowrulev2 = opacity 0.95 override 0.90 override, floating:1

# Media - Full opacity
windowrulev2 = opacity 1.0 override 1.0 override, class:^(mpv|vlc|youtube)$
windowrulev2 = opacity 1.0 override 1.0 override, title:^(.*YouTube.*)$

# ─────────────────────────────────────────────────────────────────────────────
# Idle Inhibit Rules
# ─────────────────────────────────────────────────────────────────────────────
windowrule = noinitialfocus, class:(.*[Ss]potify.*)|(.*tidal-hifi.*)$|(.*You[Tt]ube Music.*)|^(.*feishin.*)$
windowrule = idleinhibit always, class:^(.*steam_app.*)$
windowrule = idleinhibit focus, class:^(.*[Ss]potify.*)$|^(.*feishin.*)$
windowrule = idleinhibit fullscreen, class:^(.*celluloid.*)$|^(.*mpv.*)$|^(.*vlc.*)$
windowrule = idleinhibit fullscreen, class:^(.*LibreWolf.*)$|^(.*floorp.*)$|^(.*Brave.*)$|^(.*firefox.*)$|^(.*chromium.*)$|^(.*zen-alpha.*)$
windowrule = immediate, class:^(.*steam_app.*)$

# ─────────────────────────────────────────────────────────────────────────────
# Animation Rules
# ─────────────────────────────────────────────────────────────────────────────
windowrule = animation slide, title:^(.*cava.*)$
windowrule = animation popin, class:^(.*wleave.*)$

# ─────────────────────────────────────────────────────────────────────────────
# Layer Rules
# ─────────────────────────────────────────────────────────────────────────────
layerrule = animation popin, rofi
layerrule = blur, rofi
layerrule = ignorezero, rofi

layerrule = blur, waybar
layerrule = ignorezero, waybar

layerrule = ignorezero, swaync-notification-window
layerrule = ignorezero, swaync-control-center
layerrule = animation slide, swaync-notification-window
layerrule = animation slide, swaync-control-center

layerrule = animation fade, swayosd
layerrule = animation fade, selection
layerrule = animation fade, hyprlock
layerrule = noanim, hyprpicker
